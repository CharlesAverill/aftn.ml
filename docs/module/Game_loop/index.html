<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Game_loop (AFTN.AFTN.Game_loop)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.4"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">AFTN</a> &#x00BB; <a href="../index.html">AFTN</a> &#x00BB; Game_loop</nav><header class="odoc-preamble"><h1>Module <code><span>AFTN.Game_loop</span></code></h1><p>Main game loop and player actions</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-win_game"><a href="#val-win_game" class="anchor"></a><code><span><span class="keyword">val</span> win_game : <span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lose_game"><a href="#val-lose_game" class="anchor"></a><code><span><span class="keyword">val</span> lose_game : <span><span class="optlabel">?game_over</span>:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-setup_game"><a href="#val-setup_game" class="anchor"></a><code><span><span class="keyword">val</span> setup_game : <span>int <span class="arrow">&#45;&gt;</span></span> <span>bool <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Set up the game state given user preferences</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-complete_objective"><a href="#val-complete_objective" class="anchor"></a><code><span><span class="keyword">val</span> complete_objective : <span><span><a href="../Objective/index.html#type-objective_kind">Objective.objective_kind</a> <a href="../Objective/index.html#type-goal">Objective.goal</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-setup_final_mission"><a href="#val-setup_final_mission" class="anchor"></a><code><span><span class="keyword">val</span> setup_final_mission : <span><a href="../Character/index.html#type-character">Character.character</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-update_final_mission"><a href="#val-update_final_mission" class="anchor"></a><code><span><span class="keyword">val</span> update_final_mission : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Check if final mission criteria have been met, win game if so</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-update_objectives"><a href="#val-update_objectives" class="anchor"></a><code><span><span class="keyword">val</span> update_objectives : <span><a href="../Character/index.html#type-character">Character.character</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Check uncleared objectives and clear them if conditions are met</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-see_objectives"><a href="#val-see_objectives" class="anchor"></a><code><span><span class="keyword">val</span> see_objectives : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-reduce_morale"><a href="#val-reduce_morale" class="anchor"></a><code><span><span class="keyword">val</span> reduce_morale : <span>int <span class="arrow">&#45;&gt;</span></span> <span>bool <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Reduce morale by <code>n</code> and check for morale-loss-reduction items and game over</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-character_move"><a href="#val-character_move" class="anchor"></a><code><span><span class="keyword">val</span> character_move : 
  <span><a href="../Character/index.html#type-character">Character.character</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Map/index.html#type-room">Map.room</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Map/index.html#type-room">Map.room</a> option</span></span></code></div><div class="spec-doc"><p>Prompt player for room to move to, return <code>None</code> if action canceled</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-flee"><a href="#val-flee" class="anchor"></a><code><span><span class="keyword">val</span> flee : <span><a href="../Character/index.html#type-character">Character.character</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Force a character to move 3 spaces away</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-xeno_move"><a href="#val-xeno_move" class="anchor"></a><code><span><span class="keyword">val</span> xeno_move : <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Move the xenomorph closer to the closest team member</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_ash_health"><a href="#val-check_ash_health" class="anchor"></a><code><span><span class="keyword">val</span> check_ash_health : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ash_move"><a href="#val-ash_move" class="anchor"></a><code><span><span class="keyword">val</span> ash_move : <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-action"><a href="#type-action" class="anchor"></a><code><span><span class="keyword">type</span> action</span><span> = </span></code><ol><li id="type-action.Move" class="def variant constructor anchored"><a href="#type-action.Move" class="anchor"></a><code><span>| </span><span><span class="constructor">Move</span></span></code></li><li id="type-action.PickUp" class="def variant constructor anchored"><a href="#type-action.PickUp" class="anchor"></a><code><span>| </span><span><span class="constructor">PickUp</span></span></code></li><li id="type-action.Drop" class="def variant constructor anchored"><a href="#type-action.Drop" class="anchor"></a><code><span>| </span><span><span class="constructor">Drop</span></span></code></li><li id="type-action.Ability" class="def variant constructor anchored"><a href="#type-action.Ability" class="anchor"></a><code><span>| </span><span><span class="constructor">Ability</span></span></code></li><li id="type-action.ViewInventory" class="def variant constructor anchored"><a href="#type-action.ViewInventory" class="anchor"></a><code><span>| </span><span><span class="constructor">ViewInventory</span></span></code></li><li id="type-action.ViewTeam" class="def variant constructor anchored"><a href="#type-action.ViewTeam" class="anchor"></a><code><span>| </span><span><span class="constructor">ViewTeam</span></span></code></li><li id="type-action.Craft" class="def variant constructor anchored"><a href="#type-action.Craft" class="anchor"></a><code><span>| </span><span><span class="constructor">Craft</span></span></code></li><li id="type-action.UseItem" class="def variant constructor anchored"><a href="#type-action.UseItem" class="anchor"></a><code><span>| </span><span><span class="constructor">UseItem</span></span></code></li><li id="type-action.TradeItem" class="def variant constructor anchored"><a href="#type-action.TradeItem" class="anchor"></a><code><span>| </span><span><span class="constructor">TradeItem</span></span></code></li><li id="type-action.EndTurn" class="def variant constructor anchored"><a href="#type-action.EndTurn" class="anchor"></a><code><span>| </span><span><span class="constructor">EndTurn</span></span></code></li><li id="type-action.ViewRoom" class="def variant constructor anchored"><a href="#type-action.ViewRoom" class="anchor"></a><code><span>| </span><span><span class="constructor">ViewRoom</span></span></code></li><li id="type-action.SeeObjectives" class="def variant constructor anchored"><a href="#type-action.SeeObjectives" class="anchor"></a><code><span>| </span><span><span class="constructor">SeeObjectives</span></span></code></li><li id="type-action.DrawMap" class="def variant constructor anchored"><a href="#type-action.DrawMap" class="anchor"></a><code><span>| </span><span><span class="constructor">DrawMap</span></span></code></li><li id="type-action.Exit" class="def variant constructor anchored"><a href="#type-action.Exit" class="anchor"></a><code><span>| </span><span><span class="constructor">Exit</span></span></code></li></ol></div><div class="spec-doc"><p>Possible turn actions</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string_of_action"><a href="#val-string_of_action" class="anchor"></a><code><span><span class="keyword">val</span> string_of_action : <span><a href="#type-action">action</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Get printable <code>string</code> representation of an <code>action</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-actions"><a href="#val-actions" class="anchor"></a><code><span><span class="keyword">val</span> actions : <span><a href="#type-action">action</a> list</span></span></code></div><div class="spec-doc"><p>List of actions to choose from</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-single_player_actions"><a href="#val-single_player_actions" class="anchor"></a><code><span><span class="keyword">val</span> single_player_actions : <span><a href="#type-action">action</a> list</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-action_select_chars"><a href="#val-action_select_chars" class="anchor"></a><code><span><span class="keyword">val</span> action_select_chars : <span>char list</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-single_player_action_select_chars"><a href="#val-single_player_action_select_chars" class="anchor"></a><code><span><span class="keyword">val</span> single_player_action_select_chars : <span>char list</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pickup"><a href="#val-pickup" class="anchor"></a><code><span><span class="keyword">val</span> pickup : <span><a href="../Character/index.html#type-character">Character.character</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Prompt player for item/scrap to pick up. If an <code>item</code> is selected, <code>true</code> is returned to indicate the turn is over, otherwise <code>false</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-drop"><a href="#val-drop" class="anchor"></a><code><span><span class="keyword">val</span> drop : <span><a href="../Character/index.html#type-character">Character.character</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Prompt the user to drop an <code>item</code> in the <code>room</code> they are located in</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-view_inventory"><a href="#val-view_inventory" class="anchor"></a><code><span><span class="keyword">val</span> view_inventory : 
  <span><span class="optlabel">?print_name</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?print_location</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Character/index.html#type-character">Character.character</a> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Show the active character's inventory</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-view_team"><a href="#val-view_team" class="anchor"></a><code><span><span class="keyword">val</span> view_team : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Show the team's morale and inventories</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-craft"><a href="#val-craft" class="anchor"></a><code><span><span class="keyword">val</span> craft : <span><a href="../Character/index.html#type-character">Character.character</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Prompt the user to craft an item with scrap and add it to the active character's inventory</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-perform_trade"><a href="#val-perform_trade" class="anchor"></a><code><span><span class="keyword">val</span> perform_trade : <span><a href="../Character/index.html#type-character">Character.character</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Character/index.html#type-character">Character.character</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Performs the trade action between two characters</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-trade_item"><a href="#val-trade_item" class="anchor"></a><code><span><span class="keyword">val</span> trade_item : <span><a href="../Character/index.html#type-character">Character.character</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Prompt user to trade items with another character</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-use"><a href="#val-use" class="anchor"></a><code><span><span class="keyword">val</span> use : <span><a href="../Character/index.html#type-character">Character.character</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-view_room"><a href="#val-view_room" class="anchor"></a><code><span><span class="keyword">val</span> view_room : <span><a href="../Character/index.html#type-character">Character.character</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Print out room information</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-trigger_encounter"><a href="#val-trigger_encounter" class="anchor"></a><code><span><span class="keyword">val</span> trigger_encounter : <span><a href="../Character/index.html#type-character">Character.character</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Draw an encounter card and execute it</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-use_ability"><a href="#val-use_ability" class="anchor"></a><code><span><span class="keyword">val</span> use_ability : <span><a href="../Character/index.html#type-character">Character.character</a> <span class="arrow">&#45;&gt;</span></span> bool * bool</span></code></div><div class="spec-doc"><p>Prompt player to use a <code>character</code>'s ability. Return whether the ability was used and whether it can be used again this turn</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-game_start"><a href="#val-game_start" class="anchor"></a><code><span><span class="keyword">val</span> game_start : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Main game entry point</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-turn"><a href="#val-turn" class="anchor"></a><code><span><span class="keyword">val</span> turn : <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="../Character/index.html#type-character">Character.character</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-game_loop"><a href="#val-game_loop" class="anchor"></a><code><span><span class="keyword">val</span> game_loop : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Main game loop</p></div></div></div></body></html>
