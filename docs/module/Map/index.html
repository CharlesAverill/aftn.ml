<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Map (AFTN.AFTN.Map)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.4"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">AFTN</a> &#x00BB; <a href="../index.html">AFTN</a> &#x00BB; Map</nav><header class="odoc-preamble"><h1>Module <code><span>AFTN.Map</span></code></h1><p>Map parsing and utilities</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-room"><a href="#type-room" class="anchor"></a><code><span><span class="keyword">type</span> room</span><span> = </span><span>{</span></code><ol><li id="type-room.name" class="def record field anchored"><a href="#type-room.name" class="anchor"></a><code><span>name : string;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Name of this room. If None, this room is a corridor</p><span class="comment-delim">*)</span></div></li><li id="type-room.is_corridor" class="def record field anchored"><a href="#type-room.is_corridor" class="anchor"></a><code><span>is_corridor : bool;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>If the room is a corridor</p><span class="comment-delim">*)</span></div></li><li id="type-room.connections" class="def record field anchored"><a href="#type-room.connections" class="anchor"></a><code><span>connections : <span>string list</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Connections denoted by room names - required as opposed to <code>room list</code> due to functional update of map</p><span class="comment-delim">*)</span></div></li><li id="type-room.ladder_connection" class="def record field anchored"><a href="#type-room.ladder_connection" class="anchor"></a><code><span>ladder_connection : <span>string option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Room connected by a ladder</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string_of_room"><a href="#val-string_of_room" class="anchor"></a><code><span><span class="keyword">val</span> string_of_room : <span><a href="#type-room">room</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Get <code>string</code> representation of <code>room</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-blank_room"><a href="#val-blank_room" class="anchor"></a><code><span><span class="keyword">val</span> blank_room : <a href="#type-room">room</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-new_room"><a href="#val-new_room" class="anchor"></a><code><span><span class="keyword">val</span> new_room : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-room">room</a></span></code></div><div class="spec-doc"><p>Create new non-corridor <code>room</code></p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-map"><a href="#type-map" class="anchor"></a><code><span><span class="keyword">type</span> map</span><span> = </span><span>{</span></code><ol><li id="type-map.map_name" class="def record field anchored"><a href="#type-map.map_name" class="anchor"></a><code><span>map_name : string;</span></code></li><li id="type-map.rooms" class="def record field anchored"><a href="#type-map.rooms" class="anchor"></a><code><span>rooms : <span><a href="#type-room">room</a> list</span>;</span></code></li><li id="type-map.player_start_room" class="def record field anchored"><a href="#type-map.player_start_room" class="anchor"></a><code><span>player_start_room : <a href="#type-room">room</a>;</span></code></li><li id="type-map.xeno_start_room" class="def record field anchored"><a href="#type-map.xeno_start_room" class="anchor"></a><code><span>xeno_start_room : <a href="#type-room">room</a>;</span></code></li><li id="type-map.ash_start_room" class="def record field anchored"><a href="#type-map.ash_start_room" class="anchor"></a><code><span>ash_start_room : <a href="#type-room">room</a>;</span></code></li><li id="type-map.scrap_rooms" class="def record field anchored"><a href="#type-map.scrap_rooms" class="anchor"></a><code><span>scrap_rooms : <span><a href="#type-room">room</a> list</span>;</span></code></li><li id="type-map.event_rooms" class="def record field anchored"><a href="#type-map.event_rooms" class="anchor"></a><code><span>event_rooms : <span><a href="#type-room">room</a> list</span>;</span></code></li><li id="type-map.coolant_rooms" class="def record field anchored"><a href="#type-map.coolant_rooms" class="anchor"></a><code><span>coolant_rooms : <span><a href="#type-room">room</a> list</span>;</span></code></li><li id="type-map.ascii_map" class="def record field anchored"><a href="#type-map.ascii_map" class="anchor"></a><code><span>ascii_map : <span>string option</span>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find_room"><a href="#val-find_room" class="anchor"></a><code><span><span class="keyword">val</span> find_room : <span><a href="#type-map">map</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-room">room</a> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map_file_of_map"><a href="#val-map_file_of_map" class="anchor"></a><code><span><span class="keyword">val</span> map_file_of_map : <span><a href="#type-map">map</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Get a <code>string</code> representation of a <code>map</code> that is equivalent to the input map file</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-update_map_room"><a href="#val-update_map_room" class="anchor"></a><code><span><span class="keyword">val</span> update_map_room : <span><a href="#type-map">map</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-room">room</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-room">room</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-map">map</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-blank_map"><a href="#val-blank_map" class="anchor"></a><code><span><span class="keyword">val</span> blank_map : <a href="#type-map">map</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-map_parsing_state"><a href="#type-map_parsing_state" class="anchor"></a><code><span><span class="keyword">type</span> map_parsing_state</span><span> = </span></code><ol><li id="type-map_parsing_state.MapName" class="def variant constructor anchored"><a href="#type-map_parsing_state.MapName" class="anchor"></a><code><span>| </span><span><span class="constructor">MapName</span></span></code></li><li id="type-map_parsing_state.RoomNames" class="def variant constructor anchored"><a href="#type-map_parsing_state.RoomNames" class="anchor"></a><code><span>| </span><span><span class="constructor">RoomNames</span></span></code></li><li id="type-map_parsing_state.NumCorridors" class="def variant constructor anchored"><a href="#type-map_parsing_state.NumCorridors" class="anchor"></a><code><span>| </span><span><span class="constructor">NumCorridors</span></span></code></li><li id="type-map_parsing_state.RoomConnections" class="def variant constructor anchored"><a href="#type-map_parsing_state.RoomConnections" class="anchor"></a><code><span>| </span><span><span class="constructor">RoomConnections</span></span></code></li><li id="type-map_parsing_state.Ladders" class="def variant constructor anchored"><a href="#type-map_parsing_state.Ladders" class="anchor"></a><code><span>| </span><span><span class="constructor">Ladders</span></span></code></li><li id="type-map_parsing_state.ScrapRooms" class="def variant constructor anchored"><a href="#type-map_parsing_state.ScrapRooms" class="anchor"></a><code><span>| </span><span><span class="constructor">ScrapRooms</span></span></code></li><li id="type-map_parsing_state.EventRooms" class="def variant constructor anchored"><a href="#type-map_parsing_state.EventRooms" class="anchor"></a><code><span>| </span><span><span class="constructor">EventRooms</span></span></code></li><li id="type-map_parsing_state.CoolantRooms" class="def variant constructor anchored"><a href="#type-map_parsing_state.CoolantRooms" class="anchor"></a><code><span>| </span><span><span class="constructor">CoolantRooms</span></span></code></li><li id="type-map_parsing_state.AsciiMap" class="def variant constructor anchored"><a href="#type-map_parsing_state.AsciiMap" class="anchor"></a><code><span>| </span><span><span class="constructor">AsciiMap</span></span></code></li></ol></div><div class="spec-doc"><p>Determines which phase of map file parsing is ongoing</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string_of_parsing_state"><a href="#val-string_of_parsing_state" class="anchor"></a><code><span><span class="keyword">val</span> string_of_parsing_state : <span><a href="#type-map_parsing_state">map_parsing_state</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-advance_parsing_state"><a href="#val-advance_parsing_state" class="anchor"></a><code><span><span class="keyword">val</span> advance_parsing_state : 
  <span><span><a href="#type-map_parsing_state">map_parsing_state</a> option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-map_parsing_state">map_parsing_state</a> option</span></span></code></div><div class="spec-doc"><p>Step parsing state forward</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_map_file"><a href="#val-parse_map_file" class="anchor"></a><code><span><span class="keyword">val</span> parse_map_file : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-map">map</a></span></code></div><div class="spec-doc"><p>Read a map file and parse it into a <code>map</code></p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-search_params"><a href="#type-search_params" class="anchor"></a><code><span><span class="keyword">type</span> search_params</span><span> = </span><span>{</span></code><ol><li id="type-search_params.distance" class="def record field anchored"><a href="#type-search_params.distance" class="anchor"></a><code><span>distance : <span>string <span class="arrow">&#45;&gt;</span></span> int;</span></code></li><li id="type-search_params.discovered" class="def record field anchored"><a href="#type-search_params.discovered" class="anchor"></a><code><span>discovered : <span>string <span class="arrow">&#45;&gt;</span></span> bool;</span></code></li><li id="type-search_params.previous_room" class="def record field anchored"><a href="#type-search_params.previous_room" class="anchor"></a><code><span>previous_room : <span>string <span class="arrow">&#45;&gt;</span></span> string;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Map room names to corresponding search parameters</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-active_search_params"><a href="#val-active_search_params" class="anchor"></a><code><span><span class="keyword">val</span> active_search_params : <span><a href="#type-search_params">search_params</a> <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_room_distance"><a href="#val-set_room_distance" class="anchor"></a><code><span><span class="keyword">val</span> set_room_distance : <span><a href="#type-room">room</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-discover_room"><a href="#val-discover_room" class="anchor"></a><code><span><span class="keyword">val</span> discover_room : <span><a href="#type-room">room</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_previous_room"><a href="#val-set_previous_room" class="anchor"></a><code><span><span class="keyword">val</span> set_previous_room : <span><a href="#type-room">room</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-room">room</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-reset_search"><a href="#val-reset_search" class="anchor"></a><code><span><span class="keyword">val</span> reset_search : <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-shortest_path"><a href="#val-shortest_path" class="anchor"></a><code><span><span class="keyword">val</span> shortest_path : <span><a href="#type-map">map</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-room">room</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-room">room</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-room">room</a> list</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find_rooms_by_distance"><a href="#val-find_rooms_by_distance" class="anchor"></a><code><span><span class="keyword">val</span> find_rooms_by_distance : <span><a href="#type-map">map</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-room">room</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-room">room</a> list</span></span></code></div></div></div></body></html>
